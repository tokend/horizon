ReviewableRequestDetails:
  oneOf:
    - $ref: '#/components/schemas/CreateAssetRequest'
    - $ref: '#/components/schemas/UpdateAssetRequest'
    - $ref: '#/components/schemas/CreatePreIssuanceRequest'
    - $ref: '#/components/schemas/CreateIssuanceRequest'
    - $ref: '#/components/schemas/CreateWithdrawRequest'
    - $ref: '#/components/schemas/CreateSaleRequest'
    - $ref: '#/components/schemas/UpdateLimitsRequest'
    - $ref: '#/components/schemas/CreateAmlAlertRequest'
    - $ref: '#/components/schemas/ChangeRoleRequest'
    - $ref: '#/components/schemas/UpdateSaleDetailsRequest'
    - $ref: '#/components/schemas/CreateAtomicSwapBidRequest'
    - $ref: '#/components/schemas/CreateAtomicSwapRequest'
    - $ref: '#/components/schemas/CreatePollRequest'

CreateAssetRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            asset:
              type: object
              description: "asset"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          required:
            - asset
            - type
            - policies
            - pre_issuance_asset_signer
            - max_issuance_amount
            - initial_preissued_amount
            - creator_details
          properties:
            asset:
              type: string
              description: "Unique asset identifier"
              example: "USD"
            type:
              type: integer
              format: uint64
              description: "Numeric type of asset"
              example: 1
            policies:
              type: integer
              description: "Policies specified for the asset creation"
              example: 12
            pre_issuance_asset_signer:
              type: string
              description: "Address of an account that performs pre issuance"
              example: "GBSR6JG5AYSAW7HK6EGJFYVIVN54LVGSY3ZLJ6X3IBQZ766EJABCZQTH"
            max_issuance_amount:
              type: string
              description: "Maximal amount to be issued"
              example: "1000.123456"
              format: Amount
            initial_preissued_amount:
              type: string
              description: "Amount to be issued automatically right after the asset creation"
              example: "1000.123456"
              format: Amount
            creator_details:
              $ref: '#/components/schemas/Details'

UpdateAssetRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            asset:
              description: "asset"
              $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          required:
            - policies
            - creator_details
          properties:
            policies:
              type: integer
              description: "Policies specified for the asset creation"
              example: 12
            creator_details:
              $ref: '#/components/schemas/Details'

CreatePreIssuanceRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            asset:
              type: object
              description: "asset which would be pre-issued"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          required:
            - amount
            - signature
            - reference
            - max_issuance_amount
            - initial_preissued_amount
            - creator_details
          properties:
            amount:
              type: string
              description: "Amount to be pre issued"
              example: "123214.123456"
              format: Amount
            signature:
              type: string
              description: "Signature of the pre issuance signer"
              example: "a343e3cbcc72928a571778f77bf2554eb5b72c79ce28bbc9d3325c60c21e5241"
            reference:
              type: string
              description: "Reference on the pre issuance request (since it cannot be submitted more than once)"
              example: "a343e3cbcc72928a571778f77bf2554eb5b72c79ce28bbc9d3325c60c2123451"
            creator_details:
              $ref: '#/components/schemas/Details'

CreateIssuanceRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            asset:
              type: object
              description: "Asset"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
            receiver:
              type: object
              description: "Balance id that will receive the issued amount"
              properties:
                data:
                  $ref: '#/components/schemas/BalanceKey'
        attributes:
          type: object
          required:
            - creator_details
            - amount
          properties:
            amount:
              type: string
              description: "Amount to be issued"
              example: "1000.123456"
              format: Amount
            creator_details:
              $ref: '#/components/schemas/Details'

CreateWithdrawRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            balance:
              type: object
              description: "Balance id to withdraw from"
              properties:
                data:
                  $ref: '#/components/schemas/BalanceKey'
            asset:
              type: object
              description: "Withdrawn asset"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          required:
            - fee
            - amount
            - creator_details
            - reviewer_details
          properties:
            amount:
              type: string
              description: "Amount to be issued"
              example: "1000.123456"
              format: Amount
            fee:
              $ref: '#/components/schemas/Fee'
            creator_details:
              $ref: '#/components/schemas/Details'

CreateSaleRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            base_asset:
              type: object
              description: "Asset to be sold"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
            default_quote_asset:
              type: object
              description: "Default quote asset for sale"
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
            quote_assets:
              description: "Sale quote assets specified on creation"
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          required:
            - access_definition_type
            - base_asset_for_hard_cap
            - start_time
            - end_time
            - sale_type
            - creator_details
            - soft_cap
            - hard_cap
          properties:
            access_definition_type:
              type: string
              format: SaleAccessDefinitionType
              minimum: 1
              maximum: 3
              description: |
                indicates access definition type of the sale
                * 0 - none
                * 1 - whitelist
                * 2 - blacklist
            base_asset_for_hard_cap:
              type: string
              description: "Maximum amount of base asset to be sold"
              example: "1000.123456"
              format: Amount
            soft_cap:
              type: string
              format: Amount
              example: "123.678902"
              description: "Minimal amount in base asset for sale to reach to be considered successful"
            hard_cap:
              type: string
              format: Amount
              example: "123.678901"
              description: "Maximal amount in base asset to be sold on sale"
            start_time:
              type: string
              description: "Time when a sale should start"
              format: "date-time"
              example: "2012-11-01T22:08:41+00:00"
            end_time:
              type: string
              description: "Time when a sale should end"
              format: "date-time"
              example: "2012-11-01T22:08:41+00:00"
            sale_type:
              type: integer
              format: xdr.SaleType
              minimum: 1
              maximum: 3
              example: 2
              description: |
                Defines sale type:
                * 1 - **basic sale**
                * 2 - **crowdfunding** sale
                * 3 - **fixed price** sale
            creator_details:
              $ref: '#/components/schemas/Details'

UpdateLimitsRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [attributes]
      properties:
        attributes:
          type: object
          required:
            - creator_details
          properties:
            creator_details:
              $ref: '#/components/schemas/Details'

CreateAmlAlertRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            balance:
              type: object
              description: "Balance"
              properties:
                data:
                  $ref: '#/components/schemas/BalanceKey'
        attributes:
          type: object
          required:
            - amount
            - creator_details
          properties:
            amount:
              type: string
              description: "Amount"
              example: "1000.123456"
              format: Amount
            creator_details:
              $ref: '#/components/schemas/Details'

ChangeRoleRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          required:
            - destination_account
          properties:
            account_to_update_role:
              type: object
              description: "Target account whose role is to be changed"
              properties:
                data:
                  $ref: '#/components/schemas/AccountKey'
        attributes:
          type: object
          required:
            - account_role_to_set
            - sequence_number
            - creator_details
          properties:
            account_role_to_set:
              type: integer
              format: uint64
              minimum: 1
              maximum: 10
              description: |
              example: 1
            sequence_number:
              type: integer
              format: uint32
              description: "Sequence number"
              example: 10
            creator_details:
              description: "free-form object to attach details to the reviewable request"
              $ref: '#/components/schemas/Details'

UpdateSaleDetailsRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            sale:
              type: object
              description: "Sale which details should be updated"
              properties:
                data:
                  $ref: '#/components/schemas/Int64Key'
        attributes:
          type: object
          required:
            - creator_details
          properties:
            creator_details:
              $ref: '#/components/schemas/Details'
              description: "New details to set for sale"

CreateAtomicSwapBidRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          deprecated: true
          properties:
            base_balance:
              type: object
              description: "Base balance for bid"
              deprecated: true
              properties:
                data:
                  $ref: '#/components/schemas/BalanceKey'
            quote_assets:
              description: "Assets that can be accepted"
              type: object
              deprecated: true
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          deprecated: true
          required:
            - creator_details
            - base_amount
          properties:
            base_amount:
              deprecated: true
              type: string
              description: "Amount of bid"
              example: "100.000001"
              format: Amount
            creator_details:
              deprecated: true
              $ref: '#/components/schemas/Details'

CreateAtomicSwapRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          deprecated: true
          properties:
            bid:
              type: object
              description: "Bid to create atomic swap for"
              deprecated: true
              properties:
                data:
                  $ref: '#/components/schemas/Int64Key'
            quote_asset:
              description: "Asset used to perform atomic swap"
              type: object
              deprecated: true
              properties:
                data:
                  $ref: '#/components/schemas/AssetKey'
        attributes:
          type: object
          deprecated: true
          required:
            - base_amount
          properties:
            base_amount:
              deprecated: true
              type: string
              description: "Amount in base asset to perform atomic swap on"
              example: "100.000001"
              format: Amount
            details:
              $ref: '#/components/schemas/Details'

CreatePollRequest:
  allOf:
    - $ref: '#/components/schemas/Int64Key'
    - type: object
      required: [relationships, attributes]
      properties:
        relationships:
          type: object
          properties:
            result_provider:
              type: object
              description: "account that is able to finish the poll or confirm votes."
              properties:
                data:
                  $ref: '#/components/schemas/AccountKey'
        attributes:
          type: object
          required: [permission_type, number_of_choices, start_time, end_time, vote_confirmation_required, poll_data, creator_details]
          properties:
            permission_type:
              type: int
              format: uint32
              example: 4
              description: "is used to restrict using of poll through rules"
            number_of_choices:
              type: integer
              format: uint32
              example: 2
              description: "count of allowed choices"
            start_time:
              type: string
              format: date-time
              example: "2012-11-01T22:08:41Z"
              description: "the date from which voting in the poll will be allowed"
            end_time:
              type: string
              format: date-time
              example: "2012-11-01T22:08:41Z"
              description: "the date until which voting in the poll will be allowed"
            vote_confirmation_required:
              type: boolean
              example: true
              description: "defines if result provider is required to participate in poll voting"
            poll_data:
              $ref: '#/components/schemas/PollData'
            creator_details:
              $ref: '#/components/schemas/Details'