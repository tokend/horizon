PollKey:
  type: object
  properties:
    id:
      type: string
      example: "10"
    type:
      type: string
      enum:
        - "polls"
OutcomeKey:
  type: object
  properties:
    id:
      type: string
      example: "10"
    type:
      type: string
      enum:
        - "poll-outcome"

Poll:
  allOf:
    - $ref: '#/components/schemas/PollKey'
    - type: object
      required: [relationships, attributes]
      properties:
        id:
          type: string
          example: "10"
        type:
          type: string
          enum:
            - "polls"
        relationships:
          type: object
          properties:
            result_provider:
              type: object
              description: "account that is able to finish the poll or confirm votes"
              properties:
                data:
                  $ref: '#/components/schemas/AccountKey'
            owner:
              type: object
              description: "account that created the poll"
              properties:
                data:
                  $ref: '#/components/schemas/AccountKey'
            outcome:
              type: object
              description: "poll outcome"
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/OutcomeKey'
        attributes:
          type: object
          properties:
            permission_type:
              type: integer
              format: uint64
              example: 4
              description: "is used to restrict using of poll through rules"
            number_of_choices:
              type: integer
              format: uint64
              example: 2
              description: "count of allowed choices"
            start_time:
              type: string
              format: date-time
              example: "2012-11-01T22:08:41Z"
              description: "the date from which voting in the poll will be allowed"
            end_time:
              type: string
              format: date-time
              example: "2012-11-01T22:08:41Z"
              description: "the date until which voting in the poll will be allowed"
            vote_confirmation_required:
              type: boolean
              example: true
              description: "defines if result provider is required to participate in poll voting"
            poll_state:
              type: object
              description: |
                * 1 - open
                * 2 - passed
                * 3 - failed
              properties:
                name:
                  type: string
                  description: "name of the flag"
                  example: "open"
                value:
                  type: integer
                  description: "value of the flag"
                  example: 1
            poll_data:
              type: object
              properties:
                type:
                  type: object
                  properties:
                    name:
                      type: string
                      example: "single_choice"
                    value:
                      type: integer
                      format: uint64
                      example: 0
            creator_details:
              $ref: '#/components/schemas/Details'

Outcome:
  allOf:
    - $ref: '#/components/schemas/OutcomeKey'
    - type: object
      required: [relationships]
      properties:
        relationships:
          votes:
            type: array
            items:
              $ref: '#/components/schemas/VoteKey'